# Retry Mechanism для API запросов

## Описание

Добавлен автоматический retry механизм для всех API запросов. Если запрос возвращает статус 5xx (500, 502, 503, 504), он автоматически повторяется до 3 раз с экспоненциальной задержкой.

## Как это работает

1. **Автоматическое применение**: Все существующие API вызовы автоматически используют retry механизм
2. **Умная задержка**: Задержка между попытками увеличивается экспоненциально (1s, 2s, 4s)
3. **Максимальная задержка**: Максимальная задержка ограничена 5 секундами
4. **Логирование**: В консоль выводится информация о retry попытках

## Конфигурация

Настройки retry механизма находятся в файле `retryConfig.ts`:

```typescript
export const defaultRetryConfig: RetryConfig = {
  maxRetries: 3,           // Максимальное количество попыток
  retryDelay: 1000,        // Базовая задержка в миллисекундах
  maxRetryDelay: 5000,     // Максимальная задержка
  retryMultiplier: 2,      // Множитель для экспоненциальной задержки
  retryableStatuses: [500, 502, 503, 504]  // Статусы для retry
}
```

## Пример работы

```
Request failed with status 500, retrying in 1000ms (attempt 1/3)
Request failed with status 500, retrying in 2000ms (attempt 2/3)
Request failed with status 500, retrying in 4000ms (attempt 3/3)
```

## Что изменилось

- Создан файл `requestWithRetry.ts` с логикой retry
- Обновлен файл `request.ts` для использования retry механизма
- Добавлен файл `retryConfig.ts` с настройками
- Все существующие API вызовы автоматически используют новый механизм

## Совместимость

- ✅ Все существующие API вызовы продолжают работать
- ✅ Retry механизм прозрачен для пользователей API
- ✅ Можно настроить параметры retry через конфигурацию
- ✅ Поддерживает отмену запросов (cancellation)

## Логирование

В консоли браузера вы увидите предупреждения о retry попытках:
- Статус ошибки
- Время до следующей попытки
- Номер текущей попытки
- Общее количество попыток
